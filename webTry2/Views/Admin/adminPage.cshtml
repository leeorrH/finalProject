
@{
    Layout = null;
}

<!DOCTYPE html>

<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto|Varela+Round">
    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>

    <meta name="viewport" content="width=device-width" />
    <title>employeePage</title>
    <script src="~/Scripts/injections/angular.js"></script>
    <!-- admin page angularJS -->
    <script src="~/Scripts/AdminPageScripts/admin_app.js"></script>
    <!-- employee encryptor table style -->
    <link href="~/Scripts/employeePageScripts/employeeTableStyle.css" rel="stylesheet" />
    <!-- employee encryptor map view style -->
    <link href="~/Scripts/employeePageScripts/mapViewPageStyle.css" rel="stylesheet" />
    <!--    google maps      -->
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCu17rCny75w7pwUdE86_ar2ditlZA-Ous&">
    </script>
    <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>

    <!-- Global functions src -->
    <script src="~/Scripts/common/common.js"></script>

</head>
<body ng-app="adminApp" ng-controller="adminPageContoller" ng-init="onLoad()">

    <!-- nav bar same as on home page -->
    <nav class="navbar navbar-inverse">
        <div class="container-fluid">
            <div class="navbar-header">
                <span class="navbar-brand" style="color:antiquewhite"> Hello Admin </span>
            </div>
            <ul class="nav navbar-nav">
                <li><a id="encryptorManagmentLink" onclick="$('#encryptorManagmentPage').show(); $('#encryptorMappingPage').hide()"> Encryptor managment </a></li>
                <li><a id="encryptorMappingPageLink" onclick="$('#encryptorMappingPage').show(); $('#encryptorManagmentPage').hide()">Encryptor mapping</a></li>
            </ul>
            <button type="button" style="float:right" class="btn btn-primary navbar-btn"   ng-click ="exportEncExl()">exportEncExl</button>
            <button type="button" style="float:right" class="btn btn-primary navbar-btn" ng-click="logout()">Logout</button>
        </div>
    </nav>
    <!--      TO DO LIST
        * adding view option for each row - done by editing what's important
        * add functionality for  view(cannot delete just update)
        * for initialize - need to overcome the refresh problem that there is no username!

        next:
        * add a map view with encryptors locations and choosing options like: by site
        -->
    <div class="container" id="encryptorManagmentPage">
        <div class="table-wrapper" style="margin-top:40px">
            <div class="table-title">
                <div class="row">
                    <div class="col-sm-6">
                        <h2>Manage <b>All Encryptors</b></h2>
                    </div>
                </div>
            </div>
            <table class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th><input type="text" ng-model="searchtxt.ownerID" class="form-control" placeholder="OwnerID"></th>
                        <th><input type="text" ng-model="searchtxt.serialNumber" class="form-control" placeholder="Serial number"></th>
                        <th><input type="text" ng-model="searchtxt.timestamp" class="form-control" placeholder="Time Stamp"></th>
                        <th><input type="text" ng-model="searchtxt.deviceLocation.facility" class="form-control" placeholder="Facility"></th>
                        <th><input type="text" ng-model="searchtxt.deviceLocation.building" class="form-control" placeholder="Building"></th>
                        <th><input type="text" ng-model="searchtxt.status" class="form-control" placeholder="Status"></th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="record in Encryptors | filter : searchtxt">
                        <td>{{record.ownerID}}</td>
                        <td>{{record.serialNumber}}</td>
                        <td>{{record.timestampAsString}}</td>
                        <td>{{record.deviceLocation.facility}}</td>
                        <td>{{record.deviceLocation.building}}</td>
                        <td>{{record.status}}</td>
                        <td>
                            <a href="#editEmployeeModal" class="edit" data-toggle="modal"><i class="material-icons" data-toggle="tooltip" title="Edit" ng-click="getRowData($index)">&#xE254;</i></a>
                            <a href="#deleteEmployeeModal" class="delete" data-toggle="modal"><i class="material-icons" data-toggle="tooltip" title="Delete">&#xE872;</i></a>
                        </td>

                    </tr>
                </tbody>
            </table>
        </div>
    </div>



    <!-- Edit Modal HTML -->
    <div id="editEmployeeModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <form>
                    <div class="modal-header">
                        <h4 class="modal-title">Edit Employee</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">
                        <div class="form-group">
                            <label>Serial number</label>
                            <input type="text" class="form-control" readonly ng-model="tempDataForEditWindow.serialNumber">
                        </div>
                        <div class="form-group">
                            <label>Time-stamp</label>
                            <input type="datetime" class="form-control" readonly ng-model="tempDataForEditWindow.timestampAsString">
                        </div>
                        <div class="form-group">
                            <label>ownerID</label>
                            <input type="text" class="form-control" readonly required ng-model="tempDataForEditWindow.ownerID">
                        </div>
                        <!-- need to be changed to listbox-->
                        <div class="form-group">
                            <label>status</label>
                            <select class="form-control" id="statusSelect">
                                <option value="1">in use</option>
                                <option value="2">destroyed</option>
                                <option value="3">lost</option>
                                <option value="4">delivered</option>
                            </select>
                            <!-- <input type="text" class="form-control" required>  -->
                        </div>
                        <!-- need to be changed to listbox-->
                        <div class="form-group">
                            <label>facility</label>
                            <input type="text" class="form-control" ng-model="tempDataForEditWindow.deviceLocation.facility" required />
                        </div>
                        <div class="form-group">
                            <label>building</label>
                            <input type="text" class="form-control" required ng-model="tempDataForEditWindow.deviceLocation.building" />
                        </div>
                        <div class="form-group">
                            <label>floor</label>
                            <input type="number" class="form-control" required ng-model="tempDataForEditWindow.deviceLocation.floor" />
                        </div>
                        <div class="form-group">
                            <label>room</label>
                            <input type="number" class="form-control" required ng-model="tempDataForEditWindow.deviceLocation.room" min="0" />
                        </div>
                        <div class="form-group">
                            <label>Change reason</label>
                            <textarea class="form-control" required></textarea>
                        </div>

                    </div>
                    <div dir="ltr" style="margin-left:10px">
                        <p class="text-warning">please pay attention!</p>
                        <p class="text-warning">updated time stemp will set automaticlly when your update approved</p>
                    </div>
                    <div class="modal-footer">
                        <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel" ng-click="closeEdit()">
                        <input type="submit" class="btn btn-info" value="Save">
                    </div>
                </form>
            </div>
        </div>
    </div>
    <!-- Delete Modal HTML -->
    <div id="deleteEmployeeModal" class="modal fade">
        <div class="modal-dialog">
            <div class="modal-content">
                <form>
                    <div class="modal-header">
                        <h4 class="modal-title">Delete Encryptor</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body">
                        <p>Are you sure you want to delete these Records?</p>
                        <p class="text-warning"><small>This action cannot be undone.</small></p>
                    </div>
                    <div class="modal-footer">
                        <input type="button" class="btn btn-default" data-dismiss="modal" value="Cancel">
                        <input type="submit" class="btn btn-danger" value="Delete">
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- map view page-->
    <div id="encryptorMappingPage" style="display:none; margin-top:20px">

        <div class="container">

            <h2>View encryptors on map</h2>
            <!--Section description-->
            <p style="font-size:medium">
                here you can see your encryptors on an interactive map.
            </p>

            <div class="row">
                <!-- <div class="col-lg-5">    -->
                <div class="flex-container">
                    <div>
                        <!--Header-->
                        <div class="panel-heading">
                            <h3>search your encryptor here</h3>
                        </div>
                        <!-- search regular without choosing -->
                        <div class="flex-container">
                            <div>
                                <label style="margin-right:10px">Search by:</label>
                                <select id="viewBySelect" onchange="viewByClicked()">
                                    <option value="0" selected>Encryptor location</option>
                                    <option value="1">Building</option>
                                    <option value="2">site</option>
                                    <!-- <option value="1">something else</option>  -->
                                </select>
                            </div>
                            <div style="margin-left:7px;">
                                <select id="viewBySite" style="visibility:hidden;">
                                    <option value="1">Leshem</option>
                                    <option value="2">Mahon David</option>
                                    <option value="3">Jerusalem</option>
                                </select>
                            </div>
                           <div>
                                <input id="searchInput" type="text" class="form-control" placeholder="Search" >
                           </div>
                           <div>
                               <button type="submit" class="btn btn-default" ng-click="searchResults()">Search</button>
                           </div> 
                        </div>
                    </div>
                </div>
                <br />
                <!-- <div class="col-lg-7">    -->
                <!--Google map-->
                <div id="googleMap"></div>
            </div>
        </div>
    </div>

</body>
</html>




